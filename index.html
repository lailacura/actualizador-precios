<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Actualizador de Lista de Precios</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center p-4">
  <div class="bg-white shadow-2xl rounded-2xl p-6 w-full max-w-2xl">
    <h1 class="text-2xl font-bold text-gray-800 mb-4 text-center">ðŸ›’ Actualizador de Lista de Precios</h1>

    <!-- Entrada de lista -->
    <label class="block text-gray-700 font-semibold mb-2">Lista de precios:</label>
    <textarea id="priceList" rows="8" class="w-full border rounded-lg p-3 mb-4 focus:ring-2 focus:ring-blue-400 outline-none" placeholder="Inserte Lista"></textarea>

    <!-- Tipo de aumento -->
    <div class="flex items-center gap-4 mb-4">
      <label class="font-semibold text-gray-700">Tipo de aumento:</label>
      <select id="increaseType" class="border rounded-lg p-2 focus:ring-2 focus:ring-blue-400">
        <option value="monto">Monto fijo (+$)</option>
        <option value="porcentaje">Porcentaje (+%)</option>
      </select>
    </div>

    <!-- Valor de aumento -->
    <div class="mb-4">
      <label class="block font-semibold text-gray-700 mb-2">Valor de aumento:</label>
      <input id="increaseValue" type="number" step="0.01" class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-blue-400" placeholder="Ej: 20">
    </div>

    <!-- BotÃ³n -->
    <button onclick="updatePrices()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition w-full">
      Actualizar lista
    </button>

    <!-- Resultado -->
    <div class="mt-6">
      <h2 class="text-lg font-bold text-gray-800 mb-2">ðŸ“„ Lista actualizada:</h2>
      <pre id="result" class="bg-gray-50 border rounded-lg p-3 text-gray-800 whitespace-pre-wrap"></pre>
    </div>

        <!-- BotÃ³n copiar -->
    <div class="mt-3 flex justify-end">
    <button id="copyButton" onclick="copyResult()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition">
        Copiar lista ðŸ“‹
    </button>
    </div>
    <p id="copyMessage" class="text-green-700 font-semibold mt-2 hidden">âœ… Lista copiada al portapapeles</p>

  </div>

  <script>
    function updatePrices() {
    const text = document.getElementById("priceList").value;
    const type = document.getElementById("increaseType").value;
    const value = parseFloat(document.getElementById("increaseValue").value);

    if (isNaN(value)) {
        alert("Por favor ingresa un valor numÃ©rico vÃ¡lido para el aumento.");
        return;
    }

    // Busca nÃºmeros dentro de *...* (por ejemplo *$650*)
    const updated = text.replace(/\*[^*0-9]*([0-9]+[.,]?[0-9]*)[^*]*\*/g, (match, num) => {
        const number = parseFloat(num.replace(",", "."));
        if (isNaN(number)) return match;

        let newNumber = number;
        if (type === "monto") {
        newNumber += value;
        } else {
        newNumber += number * (value / 100);
        }

        // Redondea sin decimales
        const rounded = Math.round(newNumber);

        // Reemplaza el nÃºmero dentro del formato original
        return match.replace(num, rounded);
    });

    document.getElementById("result").textContent = updated;

    // Oculta mensaje de copia anterior si existe
    document.getElementById("copyMessage").classList.add("hidden");
    }

    function copyResult() {
    const resultText = document.getElementById("result").textContent;
    if (!resultText.trim()) {
        alert("No hay texto para copiar. Actualiza la lista primero.");
        return;
    }

    navigator.clipboard.writeText(resultText)
        .then(() => {
        const message = document.getElementById("copyMessage");
        message.classList.remove("hidden");
        setTimeout(() => message.classList.add("hidden"), 2000);
        })
        .catch(err => {
        alert("No se pudo copiar el texto: " + err);
        });
    }
</script>



</body>
</html>
